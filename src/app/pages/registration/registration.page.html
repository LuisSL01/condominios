
<app-header titulo="Crear cuenta"></app-header>
<ion-content fullscreen>
  <!-- <form>
    <ion-item lines="full">
      <ion-label position="floating"><ion-icon name="person-outline" style="font-size:23px; color: #50c8ec; 
        margin-bottom: -5px;
    "></ion-icon>&nbsp;Nombre</ion-label>
      <ion-input type="text" required></ion-input>
    </ion-item>

    <ion-item lines="full">
      <ion-label position="floating"><ion-icon name="pencil-outline" style="font-size:23px; color: #50c8ec; 
        margin-bottom: -5px;
    "></ion-icon>&nbsp;Apellidos</ion-label>
      <ion-input type="text" required></ion-input>
    </ion-item>

    <ion-item lines="full">
      <ion-label position="floating"><ion-icon name="at-outline" style="font-size:23px; color: #50c8ec; 
        margin-bottom: -5px;
    "></ion-icon>&nbsp;Cuenta de correo</ion-label>
      <ion-input type="text" required></ion-input>
    </ion-item>

    <ion-item lines="full">
      <ion-label position="floating"><ion-icon name="lock-closed-outline" style="font-size:23px; color: #50c8ec; 
        margin-bottom: -5px;
    "></ion-icon>&nbsp;Contraseña</ion-label>
      <ion-input type="password" required></ion-input>
    </ion-item>

    <ion-row>
      <ion-col>
        <ion-button type="submit" color="secondary" expand="block">¡Regístrate!</ion-button>
      </ion-col>
    </ion-row>
  </form> -->



  <form [formGroup]="createAgente" (ngSubmit)="guardarDatos()">

    <ion-list>

      <ion-item>      
        <ion-label>
          <ion-icon name="person-outline" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Usuario:
        </ion-label>
        <ion-input formControlName="username" autocomplete="off"></ion-input>
      </ion-item>
      <ion-label color="danger"
        *ngIf="createAgente.controls.username.errors?.required && (createAgente.touched || createAgente.dirty)">* El
        usuario es obligatorio </ion-label>
      <ion-label color="danger"
        *ngIf="createAgente.controls.username.errors?.minlength && (createAgente.touched || createAgente.dirty)">* El
        usuario tiene que tener al menos 6 caracteres.</ion-label>

      <ion-item>
        
        <ion-label>
          <ion-icon name="lock-closed" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Contraseña:
        </ion-label>
        <ion-input type="password" placeholder="Contraseña" formControlName="password" autocomplete="off"></ion-input>
      </ion-item>
      <ion-label color="danger"
        *ngIf="createAgente.controls.password.errors?.required && (createAgente.touched || createAgente.dirty)">* La
        contraseña es requerida </ion-label>


      <ion-item>      
        <ion-label>
          <ion-icon name="lock-closed" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Repetir Contraseña:
        </ion-label>

        <ion-input type="password" placeholder="Repetir Contraseña" formControlName="confirmarPassword"
          autocomplete="off"></ion-input>
      </ion-item>
      <ion-label color="danger"
        *ngIf="createAgente.controls.confirmarPassword.errors?.required && (createAgente.touched || createAgente.dirty)">
        *
        La contraseña es requerida </ion-label>

      <!-- <ion-label color="danger"
      *ngIf="createAgente.get('confirmarPassword').errors['mustMatch']">* La contraseña no coindice </ion-label> -->

      <ion-item>
        <ion-label>
          <ion-icon name="person-outline" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Nombre completo:
        </ion-label>
        <ion-input formControlName="nombreCompleto"></ion-input>
      </ion-item>
      <ion-label color="danger"
        *ngIf="createAgente.controls.nombreCompleto.errors?.required && (createAgente.touched || createAgente.dirty)">*
        El
        nombre es obligatorio </ion-label>
      <ion-label color="danger"
        *ngIf="createAgente.controls.nombreCompleto.errors?.minlength && (createAgente.touched || createAgente.dirty)">*
        El nombre tiene que tener al menos 4 caracteres.</ion-label>

      <ion-item>
        
        <ion-label>
          <ion-icon name="call-outline" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Celular:
        </ion-label>
        
        <ion-input formControlName="celular"></ion-input>
      </ion-item>

      <ion-item>
        
        <ion-label>
          <ion-icon name="mail-outline" style="font-size:23px; color: #50c8ec; 
              margin-bottom: -5px;
          "></ion-icon>&nbsp;&nbsp;Email:
        </ion-label>
        <ion-input formControlName="email"></ion-input>
      </ion-item>
      <ion-label color="danger"
        *ngIf="createAgente.controls.email.errors?.email && (createAgente.touched || createAgente.dirty)">* El email no
        es
        válido.</ion-label>

      <div formGroupName="direccion">
        <ion-item>
          
          <ion-label>
            <ion-icon name="home-outline" style="font-size:23px; color: #50c8ec; 
                margin-bottom: -5px;
            "></ion-icon>&nbsp;&nbsp;Calle:
          </ion-label>

         
          <ion-input type="text" class="form-control" formControlName="calle" id="calle" placeholder="Calle">
          </ion-input>
        </ion-item>
        <div
          *ngIf="createAgente.get('direccion').get('calle').invalid && (createAgente.get('direccion').get('calle').dirty || createAgente.get('direccion').get('calle').touched)">
          <div *ngIf="createAgente.get('direccion').get('calle').errors['required']">
            La dirección es requerida.
          </div>
        </div>

        <ion-item>
          
          <ion-label>
            <ion-icon name="home-outline" style="font-size:23px; color: #50c8ec; 
                margin-bottom: -5px;
            "></ion-icon>&nbsp;&nbsp;Manzana del domicilio:
          </ion-label>
          <ion-input type="text" formControlName="manzana" autocapitalize="characters" placeholder="ej: 38-B"></ion-input>
        </ion-item>
        <div color="danger"
          *ngIf="createAgente.get('direccion').get('manzana').invalid && (createAgente.get('direccion').get('manzana').dirty || createAgente.get('direccion').get('manzana').touched)">
          <ion-label color="danger" *ngIf="createAgente.get('direccion').get('manzana').errors['required']">
            *La manzana del domicilio es requerida.
          </ion-label>
        </div>

        <ion-item>          
          <ion-label>
            <ion-icon name="home-outline" style="font-size:23px; color: #50c8ec; 
                margin-bottom: -5px;
            "></ion-icon>&nbsp;&nbsp;Código Postal:
          </ion-label>
          <ion-input type="text" maxlength = "5" class="form-control" formControlName="asentamiento" placeholder="CP"></ion-input>
        </ion-item>
        <div
          *ngIf="createAgente.get('direccion').get('asentamiento').invalid && (createAgente.get('direccion').get('asentamiento').dirty || createAgente.get('direccion').get('asentamiento').touched)">
          <ion-label color="danger" *ngIf="createAgente.get('direccion').get('asentamiento').errors['required']">
            * El código postal es requerido
          </ion-label>
        </div>
        
            <ion-button (click)="validarCP()" expand="block"  shape="round">
              Validar código postal
            </ion-button>
        

        <ion-item >          
          <ion-label>
            <ion-icon name="home-outline" style="font-size:23px; color: #50c8ec; 
                margin-bottom: -5px;
            "></ion-icon>&nbsp;&nbsp;Asentamiento:
          </ion-label>
          <ion-select interface="action-sheet" cancelText="Cancelar" placeholder="Seleccionar" required
            (ionChange)="cambioAsentamiento($event)">
            <ion-select-option *ngFor="let asento of asentamientos" [value]="asento">
              {{ asento.colonia }}-{{ asento.municipio}}--{{asento.estado}}
            </ion-select-option>
          </ion-select>

        </ion-item>

        <ion-item >
          <!-- 
         Aqui se listaran las empresas y podran ser seleccionadas para que el usuario pueda elegir a que 
         empresa se quiera dar de alta
        -->
        
          
          <ion-label>
            <ion-icon name="leaf-outline" style="font-size:23px; color: #50c8ec; 
                margin-bottom: -5px;
            "></ion-icon>&nbsp;&nbsp;Residencia:
          </ion-label>
          <ion-select interface="action-sheet" cancelText="Cancelar" placeholder="Seleccionar" required
            (ionChange)="cambioEmpresa($event)">
            <ion-select-option *ngFor="let emp of empresas" [value]="emp.id">
              {{ emp.id }}-{{ emp.alias }}-{{ emp.nombre}}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </div>


    </ion-list>

    <ion-footer class="ion-no-border" translucent>
      <ion-toolbar color="light" style="position: static;  bottom:47px; height: 50px;">
        <ion-grid>
          <ion-row>
            <ion-col size="12" size-lg="4" size-md="4" size-sm="4" offset-lg="4" offset-md="4" offset-sm="4">
              <ion-img src="assets/bee.png" style="height:30px; margin-left: -290px;"></ion-img>

              <ion-button fill="clear" size="small" type="submit" [disabled]="!createAgente.valid"
                style="text-transform: none; margin-left: 120px; margin-top: -40px;">Guardar
                <ion-icon slot="start" name="checkmark-circle-outline" style="font-size:23px; color: #50c8ec;">
                </ion-icon>
              </ion-button>


              <ion-button fill="clear" size="small"
                style="text-transform: none; margin-top: -80px;  margin-left: 220px;" routerLink="/home">Volver
                <ion-icon slot="start" name="close-circle-outline" style="font-size:23px; color: #50c8ec;"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-toolbar>
    </ion-footer>


    <ion-footer class="ion-no-border" translucent>
      <ion-toolbar color="light" style=" position: static; bottom: 0px; height: 48px;">
        <ion-grid>
          <ion-row>
            <ion-col size="12" size-lg="4" size-md="4" size-sm="4" offset-lg="4" offset-md="4" offset-sm="4">
              <ion-img src="assets/1.gif"
                style=" height:60px; display: block; width:400px;  margin-right: 20px; margin-top: -15px;"></ion-img>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-toolbar>
    </ion-footer>
  </form>






</ion-content>